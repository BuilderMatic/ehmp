define(["backbone","underscore","app/applets/documents/appletHelper"],function(e,t,o){function r(e){var t=function(e){var t=moment(e.get("referenceDateTime"),"YYYYMMDDHHmmss");return-t};e.comparator=t,e.sort(),this.trigger("resetCollection",e)}var n={queryCollection:function(e){var t={cache:!0,pageable:!1,collectionConfig:{},resourceTitle:"patient-record-document-view",viewModel:{parse:function(e){return o.parseDocResponse(e)}},onSuccess:function(e){e.each(function(e){var t=e.get("complexDoc");if(t&&"none"===e.get("authorDisplayName").toLowerCase()){o.getResultsFromUid(e,function(t){e.set("authorDisplayName",t.models[0].get("signerDisplayName"))})}})},criteria:{filter:"or("+e.buildJdsDateFilter("referenceDateTime")+","+e.buildJdsDateFilter("dateTime")+'),not(and(in(kind,["Consult","Imaging","Procedure"]),ne(statusName,"COMPLETE"))),in(kind,["Consult","Imaging","Procedure","Radiology","Laboratory Report","Laboratory Result","Surgery"])'}},n=ADK.PatientRecordService.fetchCollection(t);n.on("sync",r,this)}};return t.extend(n,e.Events),n});